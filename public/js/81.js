"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[81],{81:(t,a,i)=>{i.r(a),i.d(a,{default:()=>e});const s={data:function(){return{isPencarian:!1,isEditableData:!1,in_oapi_audit_trail:{},cari_data:"",canDoStore:!1,canDoUpdate:!1,canDoDestroy:!1,grup_url:"audit-trail"}},mounted:function(){this.verify_permission(),this.load()},methods:{loadPaginate:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$router.push(this.$router.currentRoute.path+"?page="+a),axios.get(this.$api_oapi_audit_trail+"?page="+a).then((function(a){t.in_oapi_audit_trail=a.data.in_oapi_audit_trail}))},verify_permission:function(){var t=this;window.amr_data_permission_users.forEach((function(a){if(a.grup==t.grup_url){var i=a.url.split(".")[1];"store"==i&&(t.canDoStore=!0),"update"==i&&(t.canDoUpdate=!0),"destroy"==i&&(t.canDoDestroy=!0)}}))},pencarian:function(){var t=this;this.$Progress.start(),axios.get(this.$api_oapi_audit_trail+"/pencarian?cari="+this.cari_data).then((function(a){t.isPencarian=!0,t.$Progress.finish(),t.in_oapi_audit_trail=a.data.in_oapi_audit_trail})).catch((function(a){t.$Progress.fail(),t.$error.catch(a)}))},load:function(){var t=this;this.isPencarian=!1,this.$Progress.start(),axios.get(this.$api_oapi_audit_trail).then((function(a){t.$Progress.finish(),t.in_oapi_audit_trail=a.data.in_oapi_audit_trail})).catch((function(a){t.$Progress.fail(),t.$error.catch(a)}))},hapus:function(t){var a=this;konfirmasiHapus.fire().then((function(i){i.isConfirmed&&(a.$toast.df102(),axios.delete("/api/audit-trail/"+t).then((function(){a.$toast.df200(),a.load()})).catch((function(t){a.$error.catch(t)})))}))}}};const e=(0,i(1900).Z)(s,(function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"container"},[i("div",{staticClass:"bg-white box-shadow-1 border-radius-10"},[i("div",{staticClass:"container"},[i("div",{staticClass:"row py-3"},[t._m(0),t._v(" "),i("div",{staticClass:"col-sm als"},[i("div",{staticClass:"input-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.cari_data,expression:" cari_data "}],staticClass:"form-control form-control-sm",attrs:{type:"text",placeholder:" Cari Berdasrkan Nama Form   "},domProps:{value:t.cari_data},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.pencarian.apply(null,arguments)},input:function(a){a.target.composing||(t.cari_data=a.target.value)}}}),t._v(" "),i("span",{staticClass:"input-group-prepend"},[i("button",{staticClass:"btn btn-outline-dark btn-sm round-right",on:{click:t.pencarian}},[i("i",{staticClass:"fa fa-search",attrs:{"aria-hidden":"true"}})])])])])]),t._v(" "),t.isPencarian?i("section",[t._v("\n            Hasil Dari : "+t._s(t.cari_data)+"\n            "),i("div",{staticClass:"text-blue cp",on:{click:function(a){return t.load()}}},[t._v("Reset")])]):t._e(),t._v(" "),i("div",{staticClass:"py-2 table-responsive"},[i("table",{staticClass:"table table-hover"},[i("tr",[i("th",{staticClass:"px-3 align-middle"},[t._v("Jenis")]),t._v(" "),i("th",{staticClass:"px-3 align-middle"},[t._v("Form")]),t._v(" "),i("th",{staticClass:"px-3 align-middle"},[t._v("Trace")]),t._v(" "),i("th",{staticClass:"px-3 align-middle"},[t._v("Client App")]),t._v(" "),i("th",{staticClass:"px-3 align-middle text-center"},[t._v("Waktu")]),t._v(" "),t.isEditableData?i("th",{staticClass:"px-3 align-middle text-center"},[i("i",{staticClass:"fa fa-ellipsis-v"})]):t._e()]),t._v(" "),t._l(t.in_oapi_audit_trail.data,(function(a,s){return i("tr",{key:s},[i("td",{staticClass:"px-3 align-middle",attrs:{width:"25"}},[t._v(t._s(a.jenis_kegiatan))]),t._v(" "),i("td",{staticClass:"px-3 align-middle"},[t._v(t._s(a.nama_form))]),t._v(" "),i("td",{staticClass:"px-3 align-middle",attrs:{width:"400"}},[i("table",{staticClass:"table-sm table table-bordered"},[t._m(1,!0),t._v(" "),t._l(JSON.parse(a.nama_field),(function(s,e){return i("tr",{key:e},[i("td",{staticClass:"small"},[t._v(t._s(s))]),t._v(" "),i("td",{staticClass:"small"},[t._v(t._s(JSON.parse(a.value_sebelumnya)[e]))]),t._v(" "),i("td",{staticClass:"small"},[t._v(t._s(JSON.parse(a.value_terbaru)[e]))])])}))],2)]),t._v(" "),i("td",{staticClass:"px-3 align-middle small"},[t._v(t._s(a.get_app_name.app_name))]),t._v(" "),i("td",{staticClass:"px-3 align-middle text-center small"},[t._v(t._s(t.$date(a.created_at).format("dddd, DD/MMM/YY HH:mm")))]),t._v(" "),t.isEditableData?i("td",{staticClass:"px-3 align-middle text-center",attrs:{width:"25"}},[i("div",{staticClass:"btn-group"},[t._m(2,!0),t._v(" "),i("div",{staticClass:"dropdown-menu dropdown-menu-right"},[t.canDoUpdate?i("router-link",{staticClass:"dropdown-item",attrs:{to:"audit-trail/create/"+a.id}},[t._v("Edit")]):t._e(),t._v(" "),t.canDoDestroy?i("div",{staticClass:"dropdown-item cp",on:{click:function(i){return t.hapus(a.id)}}},[t._v("Delete")]):t._e()],1)])]):t._e()])}))],2),t._v(" "),i("div",{staticClass:"container"},[i("pagination",{staticClass:"mt-3",attrs:{limit:1,data:t.in_oapi_audit_trail},on:{"pagination-change-page":t.loadPaginate}})],1)])])])])}),[function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"col-sm als"},[i("div",{staticClass:"font-weight-bolder h4"},[t._v("Daftar OApi Audit Trail")])])},function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("tr",[i("th",{staticClass:"small"},[t._v("Nama Field")]),t._v(" "),i("th",{staticClass:"small"},[t._v("V.Before")]),t._v(" "),i("th",{staticClass:"small"},[t._v("V.After")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"btn btn-sm",attrs:{type:"button","data-toggle":"dropdown"}},[a("i",{staticClass:"fa fa-ellipsis-v"})])}],!1,null,null,null).exports}}]);